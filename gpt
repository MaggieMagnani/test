-- OLHO PSICODÉLICO BÁSICO (CC: Tweaked 1.9)
local mon = peripheral.find("monitor")
if not mon then
    print("Nenhum monitor encontrado.")
    return
end

-- CONFIGURAÇÃO DO MONITOR
mon.setTextScale(0.5)
local w, h = mon.getSize()
local centerX, centerY = math.floor(w / 2), math.floor(h / 2)

-- VARIÁVEIS DO OLHO
local irisRadius = 5
local pupilRadius = 2
local irisOffset = 0
local irisDirection = 1
local irisSpeed = 0.3
local irisMaxOffset = 3

-- CORES CÍCLICAS
local irisColors = {
    colors.red, colors.orange, colors.yellow,
    colors.lime, colors.green, colors.cyan,
    colors.blue, colors.purple, colors.magenta
}
local currentColorIndex = 1
local colorTimer = 0

-- FUNÇÕES DE DESENHO
local function drawPixel(x, y, color)
    if x >= 1 and x <= w and y >= 1 and y <= h then
        mon.setCursorPos(x, y)
        mon.setBackgroundColor(color)
        mon.write(" ")
    end
end

local function drawCircle(cx, cy, radius, color)
    for y = -radius, radius do
        for x = -radius, radius do
            if x * x + y * y <= radius * radius then
                drawPixel(cx + x, cy + y, color)
            end
        end
    end
end

-- LOOP PRINCIPAL
while true do
    -- Atualiza cor da íris
    colorTimer = colorTimer + 1
    if colorTimer >= 10 then
        currentColorIndex = currentColorIndex % #irisColors + 1
        colorTimer = 0
    end
    local irisColor = irisColors[currentColorIndex]

    -- Atualiza posição da íris
    irisOffset = irisOffset + irisDirection * irisSpeed
    if math.abs(irisOffset) >= irisMaxOffset then
        irisDirection = -irisDirection
    end

    -- Limpa a tela
    mon.setBackgroundColor(colors.black)
    mon.clear()

    -- Desenha esclera (parte branca)
    drawCircle(centerX, centerY, irisRadius + 3, colors.white)

    -- Desenha íris
    drawCircle(centerX + math.floor(irisOffset), centerY, irisRadius, irisColor)

    -- Desenha pupila
    drawCircle(centerX + math.floor(irisOffset), centerY, pupilRadius, colors.black)

    sleep(0.05)
end
