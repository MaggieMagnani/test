-- OLHO PSICODÉLICO BALADA - SIMPLES E BONITO
-- Versão 1.0

-- Localiza o monitor
local mon = peripheral.find("monitor")
if not mon then
  print("Monitor não encontrado.")
  return
end

-- Configurações iniciais
mon.setTextScale(0.5)
local w, h = mon.getSize()
local centerX, centerY = math.floor(w / 2), math.floor(h / 2)

-- Cores psicodélicas da íris
local irisColors = {
  colors.red, colors.orange, colors.yellow,
  colors.green, colors.lime, colors.cyan,
  colors.blue, colors.purple, colors.magenta, colors.pink
}

-- Função para desenhar um pixel
local function drawPixel(x, y, color)
  if x >= 1 and x <= w and y >= 1 and y <= h then
    mon.setCursorPos(x, y)
    mon.setBackgroundColor(color)
    mon.write(" ")
  end
end

-- Função para desenhar um círculo (esclera e íris)
local function drawCircle(cx, cy, radius, color)
  for y = -radius, radius do
    for x = -radius, radius do
      if x * x + y * y <= radius * radius then
        drawPixel(cx + x, cy + y, color)
      end
    end
  end
end

-- Estado da íris
local iris = {
  x = 0,
  y = 0,
  t = 0,
  size = 3
}

-- Loop principal
while true do
  -- Limpa a tela
  mon.setBackgroundColor(colors.black)
  mon.clear()

  -- Atualiza movimento da íris
  iris.t = iris.t + 0.1
  iris.x = math.sin(iris.t) * 3
  iris.y = math.cos(iris.t / 2) * 1.5

  -- Desenha a esclera (parte branca maior)
  drawCircle(centerX, centerY, 10, colors.white)

  -- Escolhe cor psicodélica para a íris
  local irisColor = irisColors[math.random(1, #irisColors)]
  drawCircle(centerX + math.floor(iris.x), centerY + math.floor(iris.y), iris.size, irisColor)

  -- Desenha a pupila (centro preto)
  drawCircle(centerX + math.floor(iris.x), centerY + math.floor(iris.y), 1, colors.black)

  sleep(0.05)
end
